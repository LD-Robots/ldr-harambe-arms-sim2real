<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

  <xacro:macro name="simple_gripper" params="parent">

    <!-- Gripper: Palm -->
    <link name="left_palm">
      <inertial>
        <origin xyz="0 0.0065 0" rpy="0 0 0"/>
        <mass value="0.048"/>
        <inertia ixx="0.000148" ixy="0" ixz="0" iyy="0.000377" iyz="0" izz="0.000285"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://arm_description/meshes/visual/left_palm.stl"/>
        </geometry>
        <material name="grey">
          <color rgba="0.698 0.698 0.698 1"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://arm_description/meshes/visual/left_palm.stl"/>
        </geometry>
      </collision>
    </link>

    <!-- Gripper: Right finger (controlled) -->
    <link name="left_palm_right_finger_link">
      <inertial>
        <origin xyz="0.022 0.050 0" rpy="0 0 0"/>
        <mass value="0.029"/>
        <inertia ixx="0.000106" ixy="1.28e-05" ixz="0" iyy="4.91e-05" iyz="0" izz="8.9e-05"/>
      </inertial>
      <visual>
        <origin xyz="-0.005 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://arm_description/meshes/visual/left_palm_right_finger.stl"/>
        </geometry>
        <material name="grey"/>
      </visual>
      <collision>
        <origin xyz="-0.005 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://arm_description/meshes/visual/left_palm_right_finger.stl"/>
        </geometry>
      </collision>
    </link>

    <!-- Gripper: Left finger (mimic) -->
    <link name="left_palm_left_finger_link">
      <inertial>
        <origin xyz="-0.017 0.050 0" rpy="0 0 0"/>
        <mass value="0.029"/>
        <inertia ixx="0.000106" ixy="-1.28e-05" ixz="0" iyy="4.91e-05" iyz="0" izz="8.9e-05"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://arm_description/meshes/visual/left_palm_left_finger.stl"/>
        </geometry>
        <material name="grey"/>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://arm_description/meshes/visual/left_palm_left_finger.stl"/>
        </geometry>
      </collision>
    </link>

    <!-- Gripper: Fixed joint from wrist to palm -->
    <joint name="palm_fixture" type="fixed">
      <origin xyz="0 0.09 -0.02" rpy="0 0 0"/>
      <parent link="${parent}"/>
      <child link="left_palm"/>
    </joint>

    <!-- Gripper: Right finger (independent control) -->
    <joint name="left_palm_right_finger" type="prismatic">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <parent link="left_palm"/>
      <child link="left_palm_right_finger_link"/>
      <axis xyz="-1 0 0"/>
      <limit lower="-0.04" upper="0.0" effort="10" velocity="0.05"/>
      <safety_controller soft_upper_limit="0.0" soft_lower_limit="-0.04" k_velocity="0"/>
      <dynamics damping="0.1" friction="0.1"/>
    </joint>

    <!-- Gripper: Left finger (mimic of right finger) -->
    <joint name="left_palm_left_finger" type="prismatic">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <parent link="left_palm"/>
      <child link="left_palm_left_finger_link"/>
      <axis xyz="-1 0 0"/>
      <limit lower="0.0" upper="0.04" effort="10" velocity="0.05"/>
      <safety_controller soft_upper_limit="0.04" soft_lower_limit="0.0" k_velocity="0"/>
      <mimic joint="left_palm_right_finger" multiplier="-1.0" offset="0"/>
      <dynamics damping="0.1" friction="1.0"/>
    </joint>

  </xacro:macro>

</robot>
